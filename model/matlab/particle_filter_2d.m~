% close previous figures
close all
clear all
pause on
hold on

% constants
XMIN = -20;
XMAX = 20;
YMAX = 20;
ZMIN = -2;
ZSTEP = 0.5
ZMAX = 2;
NUMZSTEPS = (ZMAX - ZMIN) / ZSTEP + 1
POINT_SIZE = 10;
PTS_PER_SLICE = 100;

model_3d = zeros(PTS_PER_SLICE * NUMZSTEPS, 4);

% create model
for k = 0:(NUMZSTEPS-1)
    
    % x y z intensity
    slice_2d = zeros(PTS_PER_SLICE,4);
    
    % z coordinate
    slice_2d(:,3) = ZMIN + ZSTEP * k;
    
    % x coordinate
    slice_2d(:,1) = XMIN + rand(100,1) * 2 * XMAX;
    
    % y coordinate
    slice_2d(:,2) = 0 + rand(100,1) * YMAX;
    
    % linear intensity model
    dist = sqrt( slice_2d(:,1) .^ 2 + slice_2d(:,2) .^ 2);
    max_dist = sqrt( XMAX ^ 2 + YMAX ^ 2);
    slice_2d(:,4) = (1 - dist ./ max_dist);
    
    % plot it
    
    %scat = scatter3(slice_2d(:,1), slice_2d(:,2), slice_2d(:,3), POINT_SIZE, slice_2d(:,4));
    
end

% plot it
scat = scatter3(slice_2d(:,1), slice_2d(:,2), slice_2d(:,3), POINT_SIZE, slice_2d(:,4));

xlabel('X (meters)')
ylabel('Y (meters)')
zlabel('Z (meters)')
campos([-10, -5, 5])

myfun(2)
func2(3)